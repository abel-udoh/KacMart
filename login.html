<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE-edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KacMart Store</title>
    <link rel="stylesheet" href="style.css">

    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" />
</head>

<body>
    <section id ="header">
        <a href="#"><img src="images/kacmart logo.png" class="logo" alt="KacMart logo"></a>
        <div>
            <ul id="navbar">
                <li><a href="index.html">Home</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="shop.html">Shop</a></li>
                <li><a href="blog.html">Blog</a></li>
                <li><a href="contact.html">Contact</a></li>
                <li><a class="active" href="login.html"><em>Sign In</em></a></li>
                <li><a href="cart.html"><i class="far fa-shopping-bag"></i></a></li>
                <a href="#" id="close"><i class="far fa-times"></i></a>
            </ul>
        </div>
        <div id="mobile">
            <a href="cart.html"><i class="far fa-shopping-bag"></i><a>
            <i id="bar" class="fas fa-outdent"></i>
        </div>
    </section>


    <section id="sign_in">
        <div class="sign_in-form">
            <img src="images/user_icon2.png" alt="">
            <h1>Sign In!</h1>
            <form action="" class="sign_in-form">
                <!--<input type="email" class="input-box" placeholder="Your Email">-->
                <input type="email" class="input-box" name="email" placeholder="Email" required>
                <!--<input type="password" class="input-box" placeholder="Your Password">-->
                <input type="password" class="input-box" name="password" placeholder="Password" required>
                <!--<button type="button" class="sign_in-btn">Login</button>-->
                <button type="button" class="sign_in-btn" onclick="submitLoginForm()">Sign In</button>
                <p>Don't have an account? <a href="sign_up.html"><br>Sign Up</a></p>
                
            </form>
        </div>
    </section>
    <script>
        function submitLoginForm() {
          const form = document.querySelector('.sign_in-form');
          const formData = new FormData(form);
          const data = Object.fromEntries(formData);
        
          axios.post('/api/login', data)
            .then((response) => {
              if (response.data.message === 'Logged in successfully') {
                // Store the token securely (e.g., localStorage)
                localStorage.setItem('token', response.data.token);
        
                // Redirect the user to the user dashboard with the token
                window.location.href = '/user-dashboard';
              } else {
                alert(response.data.message); // Replace with your desired error handling
              }
            })
            .catch((error) => {
              console.error(error);
            });
        }
        </script>
    <script src="script.js"></script>
  
</body>
</html>